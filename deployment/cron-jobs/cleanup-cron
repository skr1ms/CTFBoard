# /etc/cron.d/ctfboard-cleanup
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

# Load environment variables (Vault config etc) from a secure location
# Make sure this file exists and contains VAULT_ADDR, VAULT_TOKEN, or POSTGRES_*
BASH_ENV=/etc/ctfboard/.env

# Run cleanup every day at 02:00 AM
0 2 * * * root . /etc/ctfboard/.env 2>/dev/null; /usr/local/bin/ctfboard-cleanup >> /var/log/ctfboard-cleanup.log 2>&1

# Run docker system prune every day at 03:00 AM
0 3 * * * root docker system prune -f --volumes >> /var/log/docker-prune.log 2>&1

